<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.devoops.rentalbrain.business.campaign.query.mapper.RecommendPromotionMapper">
    <resultMap id="getRecommendPromotionMap" type="com.devoops.rentalbrain.business.campaign.query.dto.RecommendPromotionDTO">
        <id property="id" column="ID"/>
        <result property="name" column="NAME"/>
        <result property="content" column="CONTENT"/>
        <result property="segmentName" column="SEGMENT_NAME"/>
        <result property="surveyId" column="SURVEY_ID"/>
        <result property="isUsed" column="IS_USED"/>
    </resultMap>
    <select id="selectRecommendPromotionsBySurveyId" resultMap="getRecommendPromotionMap" parameterType="long">
        SELECT
        A.ID,
        A.NAME,
        A.CONTENT,
        A.SEGMENT_NAME,
        A.SURVEY_ID,
        A.IS_USED
        FROM recommend_promotion A
        WHERE A.SURVEY_ID = #{surveyId}
    </select>
    <select id="selectRecommendPromotionById" resultMap="getRecommendPromotionMap" parameterType="long">
        SELECT
        A.ID,
        A.NAME,
        A.CONTENT,
        A.SEGMENT_NAME,
        A.SURVEY_ID
        FROM recommend_promotion A
        WHERE A.ID = #{recommendPromotionId}
    </select>
    <select id="selectRecommendPromotionOne" resultMap="getRecommendPromotionMap">
        SELECT
        A.ID,
        A.NAME,
        A.CONTENT,
        A.SEGMENT_NAME,
        A.SURVEY_ID
        FROM recommend_promotion A
        ORDER BY A.ID DESC
        LIMIT 1
    </select>
</mapper>